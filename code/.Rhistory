#stats summary of accuracies over all questions
summarize_question_accuracy(current_task_data_0.40, allQ)
#evaluate accuracy per worker, return a table per worker
worker_perf_0.40 = evaluate_worker_perf(current_task_data_0.40, allQ)
worker_perf_0.40
#stats summary of accuracies over all workers
summarize_worker_perf(current_task_data_0.40, allQ)
#number of observations valid for regression
nrow(worker_perf_0.40)
nrow(worker_perf_0.55)
summarize_worker_perf(current_task_data_0.55_weeded, allQ)
nrow(worker_perf_0.40)
qualtric_data_path_0.25 = "../qualtric_data/20171112_qualtric_results_order1_0.25.csv"
current_task_data_0.25 = get_current_task_data(qualtric_data_path_0.25)
filter = !(current_task_data_0.25$worker_id %in% current_task_data_0.40$worker_id)
sum_spillover = sum(!filter)
sum_spillover
current_task_data_0.25_weeded = current_task_data_0.25[filter, ]
question_perf_0.25 = evaluate_question_perf(current_task_data_0.25_weeded, allQ)
question_perf_0.25
summarize_question_accuracy(current_task_data_0.25_weeded, allQ)
worker_perf_0.25 = evaluate_worker_perf(current_task_data_0.25_weeded, allQ)
worker_perf_0.25
summarize_worker_perf(current_task_data_0.25_weeded, allQ)
nrow(worker_perf_0.25)
summarize_worker_perf(current_task_data_0.40, allQ)
nrow(worker_perf_0.25)
nrow(worker_perf_0.10)
summarize_worker_perf(current_task_data_0.10, allQ)
summarize_worker_perf(current_task_data_0.55_weeded, allQ)
summarize_worker_perf(current_task_data_0.40, allQ)
summarize_worker_perf(current_task_data_0.25_weeded, allQ)
worker_perf_0.10$treatment = 0.10
worker_perf_0.55$treatment = 0.55
worker_perf_0.40$treatment = 0.40
worker_perf_0.25$treatment = 0.25
regr_table = rbind(worker_perf_0.10, worker_perf_0.25, worker_perf_0.40, worker_perf_0.55) # ONCE ALL FOUR POSTINGS ARE DONE
# our covariates are CQ1, CQ2_3, CQ3
# converting some data type of some covariates
regr_table$CQ1 = as.factor(regr_table$CQ1)
regr_table$CQ2_3 = as.numeric(regr_table$CQ2_3)
regr_table$CQ3 = as.factor(regr_table$CQ3)
CQ1_1 = regr_table$CQ1 == "a lot less than half"
CQ1_2 = regr_table$CQ1 == "around half"
CQ1_3 = regr_table$CQ1 == "a lot more than half"
cov_regr_CQ1_1= lm(CQ1_1 ~ regr_table$treatment)
lmtest::coeftest(cov_regr_CQ1_1, vcov(cov_regr_CQ1_1))
cov_regr_CQ1_2= lm(CQ1_2 ~ regr_table$treatment)
lmtest::coeftest(cov_regr_CQ1_2, vcov(cov_regr_CQ1_2))
cov_regr_CQ1_3= lm(CQ1_3 ~ regr_table$treatment)
lmtest::coeftest(cov_regr_CQ1_3, vcov(cov_regr_CQ1_3))
# Preference to work with images question
cov_regr_CQ2_3= lm(CQ2_3 ~ treatment, data = regr_table)
lmtest::coeftest(cov_regr_CQ2_3, vcov(cov_regr_CQ2_3))
CQ3_1 = regr_table$CQ3 == "Yes"
CQ3_2 = regr_table$CQ3 == "No"
CQ3_3 = regr_table$CQ3 == "Maybe"
cov_regr_CQ3_1= lm(CQ3_1 ~ regr_table$treatment)
lmtest::coeftest(cov_regr_CQ3_1, vcov(cov_regr_CQ3_1))
cov_regr_CQ3_2= lm(CQ3_2 ~ regr_table$treatment)
lmtest::coeftest(cov_regr_CQ3_2, vcov(cov_regr_CQ3_2))
cov_regr_CQ3_3= lm(CQ3_3 ~ regr_table$treatment)
lmtest::coeftest(cov_regr_CQ3_3, vcov(cov_regr_CQ3_3))
car::leveneTest(worker_perf_0.10$accuracy,worker_perf_0.55$accuracy,center=median)
# 2 sample independent t-test
t.test(worker_perf_0.10$accuracy,
worker_perf_0.55$accuracy,
alternative = "two.sided", var.equal = TRUE)
regr1 = lm(accuracy ~ treatment, data = regr_table)
regr2 = lm(accuracy ~ treatment + CQ1 + CQ2_3 + CQ3, data = regr_table)
summary(regr1)
summary(regr2)
lmtest::coeftest(regr1, vcov(regr1))
lmtest::coeftest(regr2, vcov(regr2))
hist(regr_table$accuracy)
hist(regr_table[treatment == 0.55,]$accuracy)
hist(regr_table[treatment == 0.10,]$accuracy)
hist(regr_table[treatment == 0.25,]$accuracy)
hist(regr_table[treatment == 0.40,]$accuracy)
regr_table
order.part1 = c(12,9,5,7,12,7,8,6,8,4,8,5,11,5,10,9)
order.part2 = c(13,9,4,9,13,10,9,4,11,11,6,6,8,4,5,12,6)
order.part3 = c(7,4,12,6,11,11,9,9,12,4,7,7,10,10,13)
length(order.part1)
length(order.part2)
length(order.part3)
design2.order.part1 = c(12,9,5,7,12,7,8,6,8,4,8,5,11,5,10,9)
design2.order.part2 = c(13,9,4,9,13,10,9,4,11,11,6,6,8,4,5,12)
design2.order.part3 = c(6,7,4,12,6,11,11,9,9,12,4,7,7,10,10,13)
length(design2.order.part1)
length(design2.order.part2)
length(design2.order.part3)
design2.order.part1 %2 ==0
design2.order.part1 %%2 == 0
sum(design2.order.part1 %%2 == 0)
sum(design2.order.part2 %%2 == 0)
sum(design2.order.part3 %%2 == 0)
sum(design2.order.part1 %%3 == 0)
rm(list = ls())
# this is the qualtric csv file you download from qualtric platform, containing survey results
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.40.csv" #!!! UPDATE
# load supporting functions
source(file = "design1_data_transformation_functions.r")
existing_path = "../MTurk_ID_status/worker_status.csv"
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!! UPDATE
treatment_payrate = 0.40, #!!! UPDATE
existing_path = existing_path)
# Who pass this HIT enough to be eligible for payment
eligbile_id = worderIDs_task_status[pay_or_not == 1, c("worker_id","worker_id_found_on_MTurk", "repeater")]
eligbile_id
View(worderIDs_task_status)
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.40.csv"
MTurk_worker_id
"A3F341JBNZUTJN" %in% MTurk_worker_id
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!! UPDATE
treatment_payrate = 0.40, #!!! UPDATE
existing_path = existing_path)
worderIDs_task_status[worker_id == "A3F341JBNZUTJN"]
worderIDs_task_status[worker_id == "A3F341JBNZUTJN",]
names(worderIDs_task_status)
worderIDs_task_status$worker_id_status
worderIDs_task_status$worker_id
rm(list = ls())
# this is the qualtric csv file you download from qualtric platform, containing survey results
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.40.csv" #!!! UPDATE
# load supporting functions
source(file = "design1_data_transformation_functions.r")
existing_path = "../MTurk_ID_status/worker_status.csv"
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!! UPDATE
treatment_payrate = 0.40, #!!! UPDATE
existing_path = existing_path)
View(worderIDs_task_status)
upper(aok9ztwflplmh)
toupper(aok9ztwflplmh)
toupper("aok9ztwflplmh")
rm(list = ls())
# this is the qualtric csv file you download from qualtric platform, containing survey results
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.40.csv" #!!! UPDATE
# load supporting functions
source(file = "design1_data_transformation_functions.r")
existing_path = "../MTurk_ID_status/worker_status.csv"
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!! UPDATE
treatment_payrate = 0.40, #!!! UPDATE
existing_path = existing_path)
# Who pass this HIT enough to be eligible for payment
eligbile_id = worderIDs_task_status[pay_or_not == 1, c("worker_id","worker_id_found_on_MTurk", "repeater")]
eligbile_id
View(worderIDs_task_status)
construct_frame_worderIDs_task_status = function(current_task_data, submitted_MTurk_ids, allQ, payment_accuracy_threshold, task_name, treatment_payrate, existing_path) {
# for those who completed the task
dt_completer_status = evaluate_worker_perf(current_task_data, allQ)[,c("worker_id",
"accuracy",
"screener")]
dt_completer_status[, complete_task := 1][, payment_accuracy_threshold:=payment_accuracy_threshold]
completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_completer_status$worker_ids)
dt_completer_status[, repeater := as.numeric(worker_id %in% completer_repeater_ids)]
# for those who did not complete the task
not_completer_id = current_task_data[toupper(Finished) == "FALSE", ]$worker_id
dt_not_completer_status = data.table(toupper(worker_id) = not_completer_id)
dt_not_completer_status[, accuracy := NA][, screener := NA][, complete_task := 0][,payment_accuracy_threshold:=payment_accuracy_threshold]
not_completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_not_completer_status$worker_ids)
dt_not_completer_status[, repeater := as.numeric(toupper(worker_id) %in% not_completer_repeater_ids)]
# for everyone with identifiable worker id
dt_status = rbind(dt_completer_status, dt_not_completer_status)
dt_status[, worker_id_found_on_MTurk := as.numeric(toupper(worker_id) %in% toupper(submitted_MTurk_ids))]
dt_status[, task_name := task_name]
dt_status[, task_date := substr(current_task_data[1]$StartDate, 1, 10)]
dt_status[, treatment_payrate := treatment_payrate]
dt_status[, pay_or_not := as.numeric(accuracy >= payment_accuracy_threshold &
screener == 1 &
complete_task == 1 &
worker_id_found_on_MTurk == 1 &
repeater == 0)]
dt_status
}
construct_frame_worderIDs_task_status = function(current_task_data, submitted_MTurk_ids, allQ, payment_accuracy_threshold, task_name, treatment_payrate, existing_path) {
# for those who completed the task
dt_completer_status = evaluate_worker_perf(current_task_data, allQ)[,c("worker_id",
"accuracy",
"screener")]
dt_completer_status[, complete_task := 1][, payment_accuracy_threshold:=payment_accuracy_threshold]
completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_completer_status$worker_ids)
dt_completer_status[, repeater := as.numeric(worker_id %in% completer_repeater_ids)]
# for those who did not complete the task
not_completer_id = current_task_data[toupper(Finished) == "FALSE", ]$worker_id
dt_not_completer_status = data.table(toupper(worker_id) = not_completer_id))
dt_not_completer_status[, accuracy := NA][, screener := NA][, complete_task := 0][,payment_accuracy_threshold:=payment_accuracy_threshold]
not_completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_not_completer_status$worker_ids)
dt_not_completer_status[, repeater := as.numeric(toupper(worker_id) %in% not_completer_repeater_ids)]
# for everyone with identifiable worker id
dt_status = rbind(dt_completer_status, dt_not_completer_status)
dt_status[, worker_id_found_on_MTurk := as.numeric(toupper(worker_id) %in% toupper(submitted_MTurk_ids))]
dt_status[, task_name := task_name]
dt_status[, task_date := substr(current_task_data[1]$StartDate, 1, 10)]
dt_status[, treatment_payrate := treatment_payrate]
dt_status[, pay_or_not := as.numeric(accuracy >= payment_accuracy_threshold &
screener == 1 &
complete_task == 1 &
worker_id_found_on_MTurk == 1 &
repeater == 0)]
dt_status
}
construct_frame_worderIDs_task_status = function(current_task_data, submitted_MTurk_ids, allQ, payment_accuracy_threshold, task_name, treatment_payrate, existing_path) {
# for those who completed the task
dt_completer_status = evaluate_worker_perf(current_task_data, allQ)[,c("worker_id",
"accuracy",
"screener")]
dt_completer_status[, complete_task := 1][, payment_accuracy_threshold:=payment_accuracy_threshold]
completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_completer_status$worker_ids)
dt_completer_status[, repeater := as.numeric(worker_id %in% completer_repeater_ids)]
# for those who did not complete the task
not_completer_id = current_task_data[toupper(Finished) == "FALSE", ]$worker_id
dt_not_completer_status = data.table(toupper(worker_id) = not_completer_id)
dt_not_completer_status[, accuracy := NA][, screener := NA][, complete_task := 0][,payment_accuracy_threshold:=payment_accuracy_threshold]
not_completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_not_completer_status$worker_ids)
dt_not_completer_status[, repeater := as.numeric(toupper(worker_id) %in% not_completer_repeater_ids)]
# for everyone with identifiable worker id
dt_status = rbind(dt_completer_status, dt_not_completer_status)
dt_status[, worker_id_found_on_MTurk := as.numeric(toupper(worker_id) %in% toupper(submitted_MTurk_ids))]
dt_status[, task_name := task_name]
dt_status[, task_date := substr(current_task_data[1]$StartDate, 1, 10)]
dt_status[, treatment_payrate := treatment_payrate]
dt_status[, pay_or_not := as.numeric(accuracy >= payment_accuracy_threshold &
screener == 1 &
complete_task == 1 &
worker_id_found_on_MTurk == 1 &
repeater == 0)]
dt_status
}
construct_frame_worderIDs_task_status = function(current_task_data, submitted_MTurk_ids, allQ, payment_accuracy_threshold, task_name, treatment_payrate, existing_path) {
# for those who completed the task
dt_completer_status = evaluate_worker_perf(current_task_data, allQ)[,c("worker_id",
"accuracy",
"screener")]
dt_completer_status[, complete_task := 1][, payment_accuracy_threshold:=payment_accuracy_threshold]
completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_completer_status$worker_ids)
dt_completer_status[, repeater := as.numeric(worker_id %in% completer_repeater_ids)]
# for those who did not complete the task
not_completer_id = current_task_data[toupper(Finished) == "FALSE", ]$worker_id
dt_not_completer_status = data.table(toupper(worker_id) = not_completer_id)
dt_not_completer_status[, accuracy := NA][, screener := NA][, complete_task := 0][,payment_accuracy_threshold:=payment_accuracy_threshold]
not_completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_not_completer_status$worker_ids)
dt_not_completer_status[, repeater := as.numeric(toupper(worker_id) %in% not_completer_repeater_ids)]
# for everyone with identifiable worker id
dt_status = rbind(dt_completer_status, dt_not_completer_status)
dt_status[, worker_id_found_on_MTurk := as.numeric(toupper(worker_id) %in% toupper(submitted_MTurk_ids))]
dt_status[, task_name := task_name]
dt_status[, task_date := substr(current_task_data[1]$StartDate, 1, 10)]
dt_status[, treatment_payrate := treatment_payrate]
dt_status[, pay_or_not := as.numeric(accuracy >= payment_accuracy_threshold &
screener == 1 &
complete_task == 1 &
worker_id_found_on_MTurk == 1 &
repeater == 0)]
dt_status
}
construct_frame_worderIDs_task_status = function(current_task_data, submitted_MTurk_ids, allQ, payment_accuracy_threshold, task_name, treatment_payrate, existing_path) {
# for those who completed the task
dt_completer_status = evaluate_worker_perf(current_task_data, allQ)[,c("worker_id",
"accuracy",
"screener")]
dt_completer_status[, complete_task := 1][, payment_accuracy_threshold:=payment_accuracy_threshold]
completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_completer_status$worker_ids)
dt_completer_status[, repeater := as.numeric(worker_id %in% completer_repeater_ids)]
# for those who did not complete the task
not_completer_id = current_task_data[toupper(Finished) == "FALSE", ]$worker_id
dt_not_completer_status = data.table(worker_id = not_completer_id)
dt_not_completer_status[, accuracy := NA][, screener := NA][, complete_task := 0][,payment_accuracy_threshold:=payment_accuracy_threshold]
not_completer_repeater_ids = identify_repeaters_from_database(existing_path, dt_not_completer_status$worker_ids)
dt_not_completer_status[, repeater := as.numeric(toupper(worker_id) %in% not_completer_repeater_ids)]
# for everyone with identifiable worker id
dt_status = rbind(dt_completer_status, dt_not_completer_status)
dt_status[, worker_id_found_on_MTurk := as.numeric(toupper(worker_id) %in% toupper(submitted_MTurk_ids))]
dt_status[, task_name := task_name]
dt_status[, task_date := substr(current_task_data[1]$StartDate, 1, 10)]
dt_status[, treatment_payrate := treatment_payrate]
dt_status[, pay_or_not := as.numeric(accuracy >= payment_accuracy_threshold &
screener == 1 &
complete_task == 1 &
worker_id_found_on_MTurk == 1 &
repeater == 0)]
dt_status
}
toupper(c("a","b"))
rm(list = ls())
# this is the qualtric csv file you download from qualtric platform, containing survey results
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.40.csv" #!!! UPDATE
# load supporting functions
source(file = "design1_data_transformation_functions.r")
existing_path = "../MTurk_ID_status/worker_status.csv"
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!! UPDATE
treatment_payrate = 0.40, #!!! UPDATE
existing_path = existing_path)
# Who pass this HIT enough to be eligible for payment
eligbile_id = worderIDs_task_status[pay_or_not == 1, c("worker_id","worker_id_found_on_MTurk", "repeater")]
eligbile_id
rm(list = ls())
# this is the qualtric csv file you download from qualtric platform, containing survey results
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.40.csv" #!!! UPDATE
# load supporting functions
source(file = "design1_data_transformation_functions.r")
existing_path = "../MTurk_ID_status/worker_status.csv"
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!! UPDATE
treatment_payrate = 0.40, #!!! UPDATE
existing_path = existing_path)
# Who pass this HIT enough to be eligible for payment
eligbile_id = worderIDs_task_status[pay_or_not == 1, c("worker_id","worker_id_found_on_MTurk", "repeater")]
eligbile_id
View(worderIDs_task_status)
rm(list = ls())
# this is the qualtric csv file you download from qualtric platform, containing survey results
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.40.csv" #!!! UPDATE
# load supporting functions
source(file = "design1_data_transformation_functions.r")
existing_path = "../MTurk_ID_status/worker_status.csv"
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!! UPDATE
treatment_payrate = 0.40, #!!! UPDATE
existing_path = existing_path)
# Who pass this HIT enough to be eligible for payment
eligbile_id = worderIDs_task_status[pay_or_not == 1, c("worker_id","worker_id_found_on_MTurk", "repeater")]
eligbile_id
eligbile_id
rm(list = ls())
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
# load supporting functions
source(file = "design1_data_transformation_functions.r")
# existing file, be careful when you overwrite
existing_path = "../MTurk_ID_status/worker_status.csv"
# only run in the very first setup, don't touch afterwards
# DONT_USE_construct_frame_workerIDs_task_empty(custom_path = existing_path)
# this is the qualtric csv file you download from qualtric platform, containing survey results
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.40.csv" #!!! UPDATE
# construct contents for file update
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!!UPDATE
treatment_payrate = 0.40,
existing_path = existing_path) #!!! UPADTE
View(worderIDs_task_status)
existing_status = fread(existing_path)[,-c("V1")]
all_status = rbind(existing_status, worderIDs_task_status, fill=TRUE)
View(all_status)
worderIDs_task_status[toupper(worker_id) == "worderIDs_task_status",]
worderIDs_task_status[toupper(worker_id) == "A2AADXSO2P4QTD",]
write.csv(x = all_status, file = existing_path)
rm(list = ls())
# this is the qualtric csv file you download from qualtric platform, containing survey results
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.25.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.25.csv" #!!! UPDATE
# load supporting functions
source(file = "design1_data_transformation_functions.r")
existing_path = "../MTurk_ID_status/worker_status.csv"
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!! UPDATE
treatment_payrate = 0.25, #!!! UPDATE
existing_path = existing_path)
worderIDs_task_status
View(worderIDs_task_status)
eligbile_id
eligbile_id = worderIDs_task_status[pay_or_not == 1, c("worker_id","worker_id_found_on_MTurk", "repeater")]
eligbile_id
View(worderIDs_task_status)
rm(list = ls())
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
# load supporting functions
source(file = "design1_data_transformation_functions.r")
# existing file, be careful when you overwrite
existing_path = "../MTurk_ID_status/worker_status.csv"
# only run in the very first setup, don't touch afterwards
# DONT_USE_construct_frame_workerIDs_task_empty(custom_path = existing_path)
# this is the qualtric csv file you download from qualtric platform, containing survey results
qualtric_data_path = "../qualtric_data/20171118_qualtric_results_order2_0.25.csv" #!!! UPDATE
MTurk_data_path = "../MTurk_data/20171118_mturk_results_order2_0.25.csv" #!!! UPDATE
# construct contents for file update
current_task_data = get_current_task_data(csv_path = qualtric_data_path)
MTurk_worker_id = get_MTurk_worker_id(csv_path = MTurk_data_path)
# adjust the payment threshold if 0.25 task accuracy is too low
worderIDs_task_status = construct_frame_worderIDs_task_status(current_task_data = current_task_data,
submitted_MTurk_ids = MTurk_worker_id,
allQ = allQ,
payment_accuracy_threshold = 0.25,
task_name = "order2", #!!!UPDATE
treatment_payrate = 0.25,
existing_path = existing_path) #!!! UPADTE
# CAUTION!
# EXIT EXCEL FILE FIRST
# append content
existing_status = fread(existing_path)[,-c("V1")]
all_status = rbind(existing_status, worderIDs_task_status, fill=TRUE)
View(all_status)
write.csv(x = all_status, file = existing_path)
rm(list = ls())
# load supporting functions
setwd("/home/fred/Field_Experiment_Human_Image_Classification/code")
source(file = "design1_data_transformation_functions.r")
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
rm(list = ls())
# load supporting functions
# setwd("/home/fred/Field_Experiment_Human_Image_Classification/code")
setwd("F:/001_Learn_UCB/241_Experiments_and_Causality/final_project/Field_Experiment_Human_Image_Classification/code")
source(file = "design1_data_transformation_functions.r")
qualtric_data_path_0.40 = "../qualtric_data/20171118_qualtric_results_order2_0.40.csv"
current_task_data_0.40 = get_current_task_data(qualtric_data_path_0.40)
urrent_task_data_0.40
current_task_data_0.40
question_perf_0.40 = evaluate_question_perf(current_task_data_0.40, allQ)
question_perf_0.40
summarize_question_accuracy(current_task_data_0.40, allQ)
worker_perf_0.40 = evaluate_worker_perf(current_task_data_0.40, allQ)
worker_perf_0.40
summarize_worker_perf(current_task_data_0.40, allQ)
nrow(worker_perf_0.40)
qualtric_data_path_0.25 = "../qualtric_data/20171118_qualtric_results_order2_0.25.csv"
current_task_data_0.25 = get_current_task_data(qualtric_data_path_0.25)
# !!! REMOVE REPEATERS : turks who checked out the 0.10 task already
filter = !(current_task_data_0.25$worker_id %in% current_task_data_0.40$worker_id)
# get number of violaters
sum_spillover = sum(!filter)
# weed out the violaters
current_task_data_0.25_weeded = current_task_data_0.25[filter, ]
# evaluate accuracy per question
# of a particular question, how many people got it right?
question_perf_0.25 = evaluate_question_perf(current_task_data_0.25_weeded, allQ)
question_perf_0.25
#stats summary of accuracies over all questions
summarize_question_accuracy(current_task_data_0.25_weeded, allQ)
#evaluate accuracy per worker, return a table per worker
worker_perf_0.25 = evaluate_worker_perf(current_task_data_0.25_weeded, allQ)
worker_perf_0.25
#stats summary of accuracies over all workers
summarize_worker_perf(current_task_data_0.25_weeded, allQ)
#number of observations valid for regression
nrow(worker_perf_0.25)
nrow(worker_perf_0.40)
nrow(worker_perf_0.25)
worker_perf_0.25
question_perf_0.25
worker_perf_0.40
summarize_worker_perf(current_task_data_0.40, allQ)
summarize_worker_perf(current_task_data_0.25_weeded, allQ)
